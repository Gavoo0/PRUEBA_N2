<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>reparaciones</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="../assets/style_index.css">
    <link rel="stylesheet" href="../assets/style_form.css">
    <link rel="stylesheet" href="../assets/style.css">
</head>
</head>
<body>
<!-- NAVBA -->
     <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="logo">
          <img src="../images/logo_bici.avif" alt="" class="img-fluid">
        </div>  
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item active">
                <a class="btn" href="index.html">INICIO<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item active">
                <a class="btn" href="reparaciones.html">REPARACIONES</a>
              </li>
              <li class="nav-item active">
                <a class="btn" href="Catalogo.html">CATALOGO</a>
              </li>
            </ul>
            <ul class="navbar-nav ml-auto">
              <li class="nav-item active">
                <a class="btn" href="iniciar_sesion.html">INICIAR SESION</a>
              </li>
              <li class="nav-item active">
                <a class="btn" href="registrarse.html">REGISTRARSE</a>
              </li>
            </ul>
          </div>
    </nav>
<br>
<!-- REPARACIONES -->
<br>
<br>
<br>
<div class="container-sm form_cont">
<h1 class="text-center">Solicitud de Servicio de Reparación</h1>
<form>
  <div class="form-row">
    <div class="form-group col-md-12">
      <label for="RutCliente" >Rut Cliente</label>
      <input type="text" class="form-control" id="RutCliente" placeholder="Sin puntos y con guión">
    </div>
  </div>

  <div class="form-row">
    <div class="form-group col-md-12">
      <label for="inputState">Tipo De Servicio</label>
      <select id="inputState" class="form-control">
        <option selected>Mantenciones Generales</option>
        <option>Cambio de rueda</option>
        <option>Lubricaciones</option>
        <option>Cadena</option>
        <option>Amortiguadores</option>
        <option>Asiento</option>
        <option>Pintura</option>
      </select>
    </div>
    </div>

  <div class="form-row">
    <div class="form-group col-md-12">
      <label for="fecha">Fecha y Hora:</label>
      <input type="datetime-local" id="fecha" name="fecha">
    </div>
  </div>


  <div class="form-group">
    <label for="problema">Descripción Especifica Del Problema:</label>
    <textarea type = "text "id="problema" name="problema" rows="4" required></textarea>
  </div>
  <button type="submit" class="btn btn-primary">Enviar Solicitud</button>
</form>
 
</div>
<script>
    document.getElementById('formularioRUT').addEventListener('submit', function(event) {
        if (!validarRUT()) {
            event.preventDefault();
        }
    });

    function validarRUT() {
        const rutInput = document.getElementById('RutCliente').value;
        const mensaje = document.getElementById('mensaje');

        // Limpiar puntos y guion
        const rut = rutInput.replace(/^0+|[^0-9kK]+/g, '').toUpperCase();
        if (rut.length < 2) {
            mensaje.textContent = 'RUT inválido';
            return false;
        }

        const cuerpo = rut.slice(0, -1);
        const dv = rut.slice(-1);

        // Validar el cuerpo del RUT
        if (cuerpo.length < 7 || !/^[0-9]+$/.test(cuerpo)) {
            mensaje.textContent = 'RUT inválido';
            return false;
        }

        // Calcular el dígito verificador
        let suma = 0;
        let multiplo = 2;

        for (let i = 1; i <= cuerpo.length; i++) {
            const index = multiplo * cuerpo.charAt(cuerpo.length - i);
            suma = suma + index;
            multiplo = multiplo < 7 ? multiplo + 1 : 2;
        }

        const dvEsperado = 11 - (suma % 11);
        const dvFinal = dvEsperado == 11 ? '0' : dvEsperado == 10 ? 'K' : dvEsperado.toString();

        if (dvFinal !== dv) {
            mensaje.textContent = 'RUT inválido';
            return false;
        }

        mensaje.textContent = '';
        return true;
    }
        // Verificar que ningún campo esté vacío
        if(RutCliente == ''){
                        alert('Por favor, completa todos los campos.');
                        event.preventDefault(); // Evita que se envíe el formulario
    }
</script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
</body>
</html>